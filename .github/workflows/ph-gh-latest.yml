name: Debug Agent Loading in Headless Mode

on:
  workflow_dispatch:

jobs:
  debug-agent:
    runs-on: ubuntu-latest
    permissions:
      contents: read

    steps:
      - uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "22"

      - name: Install Continue CLI with Debug Output
        run: |
          echo "ðŸ“¦ Installing Continue CLI..."
          npm install @continuedev/cli
          echo "âœ… Continue CLI version: $(npx @continuedev/cli --version)"
          
          # Check if the package has debug capabilities
          echo ""
          echo "Checking for debug environment variables:"
          npx @continuedev/cli --help 2>&1 | grep -i "debug\|verbose" || echo "No debug flags found in help"

      - name: Test Different Agent Slug Formats
        env:
          CONTINUE_API_KEY: ${{ secrets.CONTINUE_API_KEY }}
        run: |
          echo "ðŸ”„ TESTING DIFFERENT command"
          echo "===================================="
          
          echo "from the cli:"
          npx @continuedev/cli --config continuedev/awesome-models-posthog-gh -p "What agent are you?" 2>&1 | tee format1.log
          npx @continuedev/cli --config continuedev/awesome-models-posthog-gh -p "Using the PostHog MCP,
           analyze my website's user data and identify the top 3 UX issues that need attention.  Focus on session recordings, user behavior patterns, and pain points." 2>&1 | tee format2.log
          
        
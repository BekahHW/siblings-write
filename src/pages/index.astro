---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
const title = 'Siblings Write';
const description = 'The Hawrot Siblings Writing Blog.';
const permalink = Astro.site.href;

// Get all blog posts and sort by date (descending)
const allPosts = await getCollection('blog');
const latestPosts = allPosts
  .sort((a, b) => {
  return new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime();
})
  .slice(0, 3); // Show latest 3 posts
---

<BaseLayout title={title} description={description} permalink={permalink}>
  <div class="home-container">
    <div class="home-copy">
      <h1>Stories from the Siblings Who Never Outgrew Wonder
</h1><div class="about-content">
        <p>Josh, Bekah, and Zach grew up chasing fireflies and building snow forts in Steubenville, Ohio. Now we‚Äôre raising kids of our own (13 total!) and writing stories that capture the magic of our childhood.</p>
      </div>
    </div>

    <div class="hero-image-container">
      <picture>
        <source srcset="/assets/Hawrot-Siblings.png" media="(min-width: 600px)">
        <img class="hero-image" alt="the Hawrot Siblings" src="/assets/Hawrot-Siblings.png" width="550" height="466">
      </picture>
<script async data-uid="775bb3f6cc" src="https://siblings-write.kit.com/775bb3f6cc/index.js"></script>
      </p>
    </div>
    <section class="latest-work">
  <h2>üìù Latest Work</h2>
  <ul class="post-list">
  {latestPosts.map((post) => (
    <li class="post-item">
      <a href={`/blog/${post.id}/`} class="post-link">
        {post.data.coverImage && (
          <img src={post.data.coverImage} alt={post.data.title} class="post-image" />
        )}
        <div class="post-content">
          <h3>{post.data.title}</h3>
          <p class="post-description">{post.data.description}</p>
          <p class="post-date">{new Date(post.data.publishDate).toLocaleDateString(undefined, {
            year: 'numeric', month: 'short', day: 'numeric'
          })}</p>
        </div>
      </a>
    </li>
  ))}
</ul>
</section>
  </div>
</BaseLayout>

<style>
  .post-list {
  list-style: none;
  padding: 0;
  margin: 2em 0;
}

.post-item {
  display: flex;
  flex-direction: row;
  gap: 1.5em;
  margin-bottom: 2.5em;
  align-items: flex-start;
}

.post-link {
  display: flex;
  flex-direction: row;
  text-decoration: none;
  color: inherit;
  width: 100%;
}

.post-image {
  width: 160px;
  height: 120px;
  object-fit: cover;
  border-radius: 8px;
  flex-shrink: 0;
}

.post-content {
  flex: 1;
}

.post-content h2 {
  margin-top: 0;
  margin-bottom: 0.4em;
  font-size: 1.4rem;
}

.post-description {
  margin-bottom: 0.8em;
  color: #444;
  line-height: 1.4;
}

.post-meta {
  font-size: 0.9em;
  color: #777;
}

.post-content h3 {
  margin: 0;
  font-size: 1.3em;
}

/* .post-description {
  margin: 0.5em 0;
  font-size: 1em;
  line-height: 1.4;
  color: #444;
} */

.post-date {
  font-size: 0.9em;
  color: #777;
}
  .home-container {
    align-items: center;
    display: flex;
    flex: 1;
    justify-content: center;
    margin: 2em 0;
    min-height: 400px;
  }

  .home-copy {
    flex: 1;
    padding: 0 1em;
  }

  .home-copy h1 {
    font-weight: 700;
    margin-bottom: 0.5em;
    line-height: 1.3;
  }

  .home-copy p {
    font-size: 1.4em;
  }

  .hero-image-container {
    margin: 0 1em;
    text-align: center;
  }

  .hero-image-container picture {
    display: block;
    min-height: 250px;
  }

  .caption {
    font-size: .8em;
    font-style: italic;
    text-align: left;
  }

  .hero-image {
    width: 100%;
    max-width: 550px;
    margin-bottom: 1em;
  }
  .about-content {
    margin-top: 1.5em;
  }

  .about-content p {
    font-size: 1.1em;
    line-height: 1.6;
    margin-bottom: 1em;
  }

  @media (max-width: 1200px) {
    p {
      font-size: 1.2em;
    }
    .about-content p {
      font-size: 1em;
    }

    .hero-image {
      max-width: 400px;
    }
  }

  @media (max-width: 800px) {
    .home-container {
      flex-direction: column;
    }

    .home-copy {
      flex: 0;
      padding-bottom: 2em;
      text-align: center;
    }
    @media (max-width: 800px) {
    .home-container {
      flex-direction: column;
    }

    .home-copy {
      flex: 0;
      padding-bottom: 1em;
      text-align: center;
    }
    
    .about-content {
      max-width: 600px;
      margin: 0 auto;
    }
  }
</style>

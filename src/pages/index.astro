---
import PostHogLayout from '../layouts/PostHogLayout.astro';
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import YouTubeVideosList from '../components/YouTubeVideosList.astro';
import youtubeVideos from '../data/youtube-videos.json';

const title = 'Siblings Write';
const description = 'The Hawrot Siblings Writing Blog.';
const permalink = Astro.site.href;
// Get all blog posts and sort by date (descending)
const allPosts = await getCollection('blog', ({ data }) => data.hidden !== true);
const latestPosts = allPosts
  .sort((a, b) => {
    return new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime();
  })
  .slice(0, 3); // Show latest 3 posts
const authorEntries = await getCollection('authors');
const getAuthorName = (authorId) => {
  const author = authorEntries.find(a => a.id === authorId);
  return author ? author.data.name : authorId; // Fallback to ID if author not found
};

// Helper to get multiple author names formatted
const getAuthorsDisplay = (authorRefs) => {
  if (!authorRefs || authorRefs.length === 0) return '';
  const names = authorRefs.map(ref => getAuthorName(ref.id));
  if (names.length === 1) return names[0];
  if (names.length === 2) return `${names[0]} and ${names[1]}`;
  return `${names.slice(0, -1).join(', ')}, and ${names[names.length - 1]}`;
};
---

<PostHogLayout>
  <BaseLayout title={title} description={description} permalink={permalink}>
    <!-- Background Animation Container -->
    <div class="bg-animation">
      <div id="stars"></div>
    </div>

    <!-- Fireflies Container -->
    <div class="fireflies-container">
      <div class="firefly"></div>
      <div class="firefly"></div>
      <div class="firefly"></div>
      <div class="firefly"></div>
      <div class="firefly"></div>
      <div class="firefly"></div>
      <div class="firefly"></div>
      <div class="firefly"></div>
    </div>

    <div class="home-container">
      <div class="home-copy">
        <div class="title-container">
          <h1 class="title-line-1">Hi, we're the</h1>
          <h1 class="title-line-2">Hawrot Siblings.</h1>
        </div>
        <div class="about-content">
          <div class="typewriter-text">
            <p>Once upon a time, in a small town called Steubenville, Ohio, there lived three siblings named Josh, Bekah, and Zach who spent their childhood chasing fireflies through summer twilights and building snow forts that felt like castles in the winter. The years turned, as they always do, and those three children grew up and became parents to thirteen little ones of their own. But here's the secret: they never quite stopped being children in the ways that matter most. So they began writing down the wonder they remembered, creating stories that tasted like childhood, because some people never outgrow wonder. They just learn to share it.</p>
          </div>
        </div>
      </div>

      <div class="hero-image-container">
        <picture>
          <source srcset="/assets/Hawrot-Siblings.png" media="(min-width: 600px)">
          <img class="hero-image" alt="the Hawrot Siblings" src="/assets/Hawrot-Siblings.png" width="550" height="466">
        </picture>
      </div>

      <!-- Newsletter Form Below Picture -->
      <div class="newsletter-callout">
            <p class="newsletter-intro">Stories that make you believe in magic - delivered first to subscribers</p>
            <form 
              action="https://app.kit.com/forms/7612128/subscriptions" 
              class="seva-form formkit-form newsletter-form-inline" 
              method="post" 
              data-sv-form="7612128" 
              data-uid="775bb3f6cc" 
              data-format="inline"
              data-version="5"
              data-options='{"settings":{"after_subscribe":{"action":"message","success_message":"Success! Now check your email to confirm your subscription.","redirect_url":""},"analytics":{"google":null,"fathom":null,"facebook":null,"segment":null,"pinterest":null,"sparkloop":null,"googletagmanager":null},"powered_by":{"show":false},"recaptcha":{"enabled":true}},"version":"5"}'
            >
              <ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul>
              <div data-element="fields" class="seva-fields formkit-fields newsletter-fields-inline">
                <div class="formkit-field">
                  <input 
                    class="formkit-input newsletter-input-inline" 
                    name="email_address" 
                    placeholder="your@email.com" 
                    required 
                    type="email"
                    aria-label="Email Address"
                  >
                </div>
                <button 
                  data-element="submit"
                  class="formkit-submit newsletter-submit-inline"
                  type="submit"
                >
                  <div class="formkit-spinner"><div></div><div></div><div></div></div>
                  <span>Join Us</span>
                </button>
              </div>
            </form>
      </div>
    </div>



    <section class="latest-section-wrapper">
      <h2 class="section-title">Latest Works</h2>
      <hr/>
      <ul class="post-list">
        {latestPosts.map((post, index) => (
          <li class="post-item" style={`animation-delay: ${index * 0.2}s`}>
            <a href={`/blog/${post.id}/`} class="post-link">
              <div class="post-content">
                <h3>{post.data.title}</h3>
                <div class="post-meta">
                  <span class="post-item-author">
                    By {post.data.authors.map((authorRef, idx) => (
                      <>
                        <a href={`/authors/${authorRef.id}`}>{getAuthorName(authorRef.id)}</a>
                        {idx < post.data.authors.length - 1 && (
                          idx === post.data.authors.length - 2 ? ' and ' : ', '
                        )}
                      </>
                    ))} |
                  </span>
                  <span class="post-date">
                    {new Date(post.data.publishDate).toLocaleDateString(undefined, {
                      year: 'numeric', month: 'short', day: 'numeric'
                    })}
                  </span>
                </div>
                <p class="post-description">{post.data.description}</p>
                <p class="read-more"><a href={`/blog/${post.id}/`}>Read more ‚Üí</a></p>
              </div>
            </a>
          </li>
        ))}
      </ul>
    </section>

    <YouTubeVideosList videos={youtubeVideos} limit={4} />

    <!-- Success Modal -->
    <div id="success-modal" class="modal-overlay" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h3>üéâ Welcome to the Family!</h3>
          <button id="close-modal" class="close-button">&times;</button>
        </div>
        <div class="modal-body">
          <p>Thanks for subscribing! We've sent a confirmation email to verify your subscription.</p>
          <p>Keep an eye out for our latest stories and family adventures!</p>
        </div>
        <div class="modal-footer">
          <button id="modal-ok" class="modal-button">Got it!</button>
        </div>
      </div>
    </div>
  </BaseLayout>
</PostHogLayout>

<style>
@import url('https://fonts.googleapis.com/css2?family=Limelight&family=Playwrite+HU:wght@100..400&display=swap');

/* Background Stars Animation */
.bg-animation {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
}

#stars {
  width: 1px;
  height: 1px;
  background: transparent;
  box-shadow: 1780px 1349px #FFF, 1487px 732px #FFF, 1994px 1305px #FFF, 1237px 1594px #FFF, 840px 623px #FFF, 1075px 638px #FFF, 1531px 1902px #FFF, 1058px 1119px #FFF, 1849px 1411px #FFF, 1327px 870px #FFF, 1164px 1671px #FFF, 1572px 1499px #FFF, 670px 1672px #FFF, 1039px 1354px #FFF, 1388px 1768px #FFF, 765px 1857px #FFF, 1889px 1415px #FFF, 1698px 1923px #FFF, 371px 1331px #FFF, 1491px 956px #FFF, 1997px 1751px #FFF, 1945px 559px #FFF, 686px 1065px #FFF, 1622px 841px #FFF, 1158px 1203px #FFF, 1869px 1395px #FFF, 1469px 1196px #FFF, 1455px 1253px #FFF, 897px 630px #FFF, 989px 1733px #FFF, 1531px 1304px #FFF, 1980px 1569px #FFF, 1104px 830px #FFF, 1529px 1729px #FFF, 1647px 1543px #FFF, 1304px 988px #FFF, 1367px 1040px #FFF, 1941px 1371px #FFF, 528px 1539px #FFF, 1980px 1586px #FFF;
  animation: animStar 100s linear infinite;
}

#stars:after {
  content: " ";
  position: absolute;
  top: 2000px;
  width: 1px;
  height: 1px;
  background: transparent;
  box-shadow: 1780px 1349px #FFF, 1487px 732px #FFF, 1994px 1305px #FFF, 1237px 1594px #FFF, 840px 623px #FFF, 1075px 638px #FFF, 1531px 1902px #FFF, 1058px 1119px #FFF, 1849px 1411px #FFF, 1327px 870px #FFF, 1164px 1671px #FFF, 1572px 1499px #FFF, 670px 1672px #FFF, 1039px 1354px #FFF, 1388px 1768px #FFF, 765px 1857px #FFF, 1889px 1415px #FFF, 1698px 1923px #FFF, 371px 1331px #FFF, 1491px 956px #FFF, 1997px 1751px #FFF, 1945px 559px #FFF, 686px 1065px #FFF, 1622px 841px #FFF, 1158px 1203px #FFF, 1869px 1395px #FFF, 1469px 1196px #FFF, 1455px 1253px #FFF, 897px 630px #FFF, 989px 1733px #FFF, 1531px 1304px #FFF, 1980px 1569px #FFF, 1104px 830px #FFF, 1529px 1729px #FFF, 1647px 1543px #FFF, 1304px 988px #FFF, 1367px 1040px #FFF, 1941px 1371px #FFF, 528px 1539px #FFF, 1980px 1586px #FFF;
}

@keyframes animStar {
  from {
    transform: translateY(0px);
  }
  to {
    transform: translateY(-2000px);
  }
}

/* ConvertKit Form Overrides */
.newsletter-callout .formkit-form {
  box-sizing: border-box;
}

.newsletter-callout .formkit-form * {
  box-sizing: border-box;
}

.newsletter-callout .formkit-field {
  display: flex;
  flex: 1;
  min-width: 0;
}

/* Newsletter Callout - Part of home container */
.newsletter-callout {
  margin-top: 1.5em;
  padding: 1.5em;
  background: rgba(255, 255, 255, 0.7);
  border-radius: 12px;
  border: 2px solid rgba(84, 142, 155, 0.2);
  backdrop-filter: blur(10px);
  width: 100%;
  max-width: 550px;
  margin: 1em;
}

.newsletter-intro {
  font-size: 1.1em !important;
  margin-bottom: 1em !important;
  color: #555;
  font-style: italic;
}

.newsletter-form-inline {
  width: 100%;
}

.newsletter-fields-inline {
  display: flex;
  gap: 0.8em;
  align-items: center;
  justify-content: center;
  flex-wrap: nowrap;
  max-width: 400px;
  margin: 0 auto;
}

.newsletter-input-inline {
  flex: 1;
  min-width: 0;
  width: auto;
  padding: 10px 14px;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  font-size: 14px;
  background: white;
  color: #333;
  transition: all 0.3s ease;
}

.newsletter-input-inline:focus {
  outline: none;
  border-color: var(--primary-color, #548e9b);
  box-shadow: 0 0 0 3px rgba(84, 142, 155, 0.1);
}

.newsletter-submit-inline {
  padding: 12px 24px;
  background: var(--primary-gradient);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  min-width: 90px;
  flex-shrink: 0;
  box-shadow: 0 4px 15px rgba(124, 58, 237, 0.3);
}

.newsletter-submit-inline::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width 0.6s ease, height 0.6s ease;
}

.newsletter-submit-inline:hover::before {
  width: 300px;
  height: 300px;
}

.newsletter-submit-inline:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 8px 25px rgba(124, 58, 237, 0.5);
}

.newsletter-submit-inline span {
  position: relative;
  z-index: 1;
}

.newsletter-submit-inline:focus {
  outline: none;
}

.formkit-spinner {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: none;
}

.formkit-spinner div {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: white;
  animation: formkit-spinner 1.2s infinite ease-in-out;
  display: inline-block;
  margin: 0 1px;
}

.formkit-spinner div:nth-child(1) { animation-delay: -0.32s; }
.formkit-spinner div:nth-child(2) { animation-delay: -0.16s; }
.formkit-spinner div:nth-child(3) { animation-delay: 0s; }

@keyframes formkit-spinner {
  0%, 80%, 100% {
    opacity: 0;
    transform: scale(0);
  }
  40% {
    opacity: 1;
    transform: scale(1);
  }
}

.formkit-alert {
  list-style: none;
  padding: 0;
  margin: 0 0 0.8em 0;
  font-size: 0.85em;
  color: #d73527;
  background: rgba(215, 53, 39, 0.1);
  border: 1px solid rgba(215, 53, 39, 0.2);
  border-radius: 6px;
  padding: 0.5em 0.8em;
  display: none;
}

.formkit-alert li {
  margin: 0;
}

@media (max-width: 600px) {
  .newsletter-callout {
    margin-top: 1.5em;
    padding: 1.2em;
  }
  
  .newsletter-fields-inline {
    flex-direction: column;
    gap: 0.6em;
    max-width: none;
  }
  
  .newsletter-input-inline {
    min-width: auto;
    width: 100%;
  }
  
  .newsletter-submit-inline {
    width: 100%;
    min-width: auto;
    flex-shrink: 1;
  }
}

@media (max-width: 500px) {
  .newsletter-intro {
    font-size: 1em !important;
    text-align: center;
  }
}

/* Success Modal Styles */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.3s ease;
}

.modal-content {
  background: white;
  border-radius: 16px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
  max-width: 500px;
  width: 90%;
  max-height: 80vh;
  overflow: auto;
  animation: slideIn 0.3s ease;
}

.modal-header {
  padding: 2em 2em 1em;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-header h3 {
  margin: 0;
  color: var(--primary-color, #548e9b);
  font-size: 1.5em;
}

.close-button {
  background: none;
  border: none;
  font-size: 2em;
  color: #999;
  cursor: pointer;
  padding: 0;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.3s ease;
}

.close-button:hover {
  background: #f0f0f0;
  color: #333;
}

.modal-body {
  padding: 1em 2em;
}

.modal-body p {
  margin: 1em 0;
  line-height: 1.6;
  color: #555;
}

.modal-footer {
  padding: 1em 2em 2em;
  text-align: center;
}

.modal-button {
  background: var(--primary-color, #548e9b);
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.modal-button:hover {
  background: #4a7d88;
  transform: translateY(-1px);
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: scale(0.8) translateY(-20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

@media (max-width: 600px) {
  .modal-content {
    width: 95%;
  }
  
  .modal-header,
  .modal-body,
  .modal-footer {
    padding-left: 1.5em;
    padding-right: 1.5em;
  }
}

.latest-section-wrapper {
  background: #f9f9f9;
  padding: 4em 2em;
  border-radius: 12px;
}

.section-title {
  font-family: 'Fira Code', monospace;
  font-size: 2.8em;
  font-weight: 700;
  margin-bottom: 0.8em;
  text-align: center;
  position: relative;
  width: 100%;
  white-space: nowrap;
  overflow: hidden;
  display: inline-block;
  background: linear-gradient(90deg, #667eea 0%, #667eea 10%, #555 50%, #555 100%);
  background-size: 200% 100%;
  background-position: 0% 0;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.section-title.typing {
  width: 0;
  border-right: 2px solid #667eea;
  animation: type-section 2s steps(40, end) forwards, gradient-fade-to-dark 7s ease-out forwards;
}

@keyframes type-section {
  0% {
    width: 0;
  }
  99% {
    border-right: 2px solid #667eea;
  }
  100% {
    width: 100%;
    border-right: none;
  }
}


.post-list {
  list-style: none;
  padding: 0;
  margin: 2em 0;
  display: flex;
  flex-direction: column;
  gap: 2em;
}

.post-item {
  background: linear-gradient(135deg, #ffffff 0%, #faf5ff 100%);
  border-radius: 16px;
  box-shadow: 0 8px 20px rgba(124, 58, 237, 0.1);
  padding: 1.5em;
  animation: fadeUp 0.6s ease forwards;
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  position: relative;
  border: 2px solid transparent;
  overflow: hidden;
}

.post-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--primary-gradient);
  opacity: 0;
  transition: opacity 0.4s ease;
  border-radius: 16px;
  z-index: 0;
}

.post-item:hover::before {
  opacity: 0.05;
}

.post-item:hover,
.post-item:focus-within {
  transform: translateY(-8px) rotate(-1deg);
  box-shadow: 0 20px 40px rgba(124, 58, 237, 0.2);
  border-color: rgba(124, 58, 237, 0.3);
}

.post-item .post-content {
  position: relative;
  z-index: 1;
}

@keyframes fadeUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.post-link {
  text-decoration: none;
  color: inherit;
}

.post-content h3 {
  margin: 0;
  font-family: var(--font-family-serif, serif);
  font-size: 1.5em;
  color: #333;
}

.post-description {
  margin: 0.6em 0;
  font-family: var(--font-family-sans, sans-serif);
  font-size: 1.1em;
  color: #555;
  line-height: 1.6;
}

.post-date {
  font-size: 0.9em;
  color: #777;
  margin-bottom: 0.5em;
}

.read-more {
  margin-top: 0.5em;
}

.read-more a {
  font-weight: bold;
  color: var(--primary-color, #548e9b);
  text-decoration: none;
  box-shadow: none;
  display: inline-block;
  transition: all 0.3s ease;
}

.read-more a:hover {
  color: var(--primary-color);
  transform: translateX(5px);
}

.post-item:hover .read-more a {
  animation: bounce-arrow 0.8s ease-in-out infinite;
}

@keyframes bounce-arrow {
  0%, 100% {
    transform: translateX(0);
  }
  50% {
    transform: translateX(8px);
  }
}

.home-container {
  align-items: center;
  display: flex;
  flex: 1;
  justify-content: center;
  min-height: 400px;
  background: linear-gradient(135deg, rgba(167, 139, 250, 0.15) 0%, rgba(79, 172, 254, 0.15) 50%, rgba(103, 232, 249, 0.15) 100%);
  padding: 2rem;
  margin: 2rem auto;
  border-radius: 24px;
  text-align: center;
  position: relative;
  overflow: hidden;
  box-shadow: 0 20px 60px rgba(124, 58, 237, 0.15);
  transition: all 0.5s ease;
}

.home-container::before,
.home-container::after {
  content: '';
  position: absolute;
  width: 4px;
  height: 4px;
  background: white;
  border-radius: 50%;
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.5);
  animation: sparkle-animation 3s ease-in-out infinite;
}

.home-container::before {
  top: 20%;
  right: 15%;
  animation-delay: 0s;
}

.home-container::after {
  bottom: 25%;
  left: 10%;
  animation-delay: 1.5s;
}

@keyframes sparkle-animation {
  0%, 100% {
    opacity: 0;
    transform: scale(0);
  }
  50% {
    opacity: 1;
    transform: scale(1);
  }
}

.home-container:hover {
  box-shadow: 0 25px 80px rgba(124, 58, 237, 0.25);
  transform: translateY(-5px);
}

.home-copy {
  flex: 1;
  padding: 0 1em;
}

.title-container {
  width: 100%;
  margin: 0 auto 1em;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.title-line-1 {
  color: #667eea;
  font-family: 'Fira Code', monospace;
  font-weight: 800;
  font-size: 1.5em;
  margin: 0;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  width: 0;
  display: block;
  animation: type-line-1 2s steps(40, end) forwards;
  border-right: 2px solid #667eea;
}

.title-line-2 {
  opacity: 0;
  font-family: var(--font-family-display, 'Cormorant Garamond', serif);
  margin: 0 auto;
  background: linear-gradient(to right, #667eea 0%, #764ba2 50%, #f093fb 100%);
  font-weight: 800;
  font-size: 4em;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  background-size: 200% auto;
  white-space: nowrap;
  overflow: hidden;
  width: 0;
  display: block;
  animation: type-line-2 2.2s steps(40, end) 2s forwards;
  border-right: 2px solid #764ba2;
}

@keyframes type-line-1 {
  0% {
    width: 0;
  }
  99% {
    border-right: 2px solid #667eea;
  }
  100% {
    width: 15ch;
    border-right: none;
  }
}

@keyframes type-line-2 {
  0% {
    background-position: 0% center;
    opacity: 0;
    width: 0;
  }
  1% {
    opacity: 1;
    border-right: 2px solid #764ba2;
  }
  50% {
    background-position: 50% center;
    border-right: 2px solid #764ba2;
  }
  99% {
    background-position: 100% center;
    border-right: 2px solid #764ba2;
  }
  100% {
    background-position: 100% center;
    opacity: 1;
    width: 18ch;
    border-right: none;
  }
}

.home-copy p {
  font-size: 1.4em;
}

.hero-image-container {
  margin: 0 1em;
  text-align: center;
}

.hero-image-container picture {
  display: block;
  min-height: 250px;
}

.caption {
  font-size: .8em;
  font-style: italic;
  text-align: left;
}

.hero-image {
  width: 100%;
  max-width: 550px;
  margin-bottom: 1em;
  border-radius: 20px;
  box-shadow: 0 20px 60px rgba(124, 58, 237, 0.3);
  transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  border: 3px solid rgba(255, 255, 255, 0.8);
}

.hero-image:hover {
  transform: scale(1.05) rotate(2deg);
  box-shadow: 0 30px 80px rgba(249, 168, 212, 0.4);
}
.about-content {
  margin-top: 1.5em;
}

.typewriter-text {
  font-size: 1.1em;
  line-height: 1.8;
  margin-bottom: 1.5em;
  min-height: 200px;
}

.typewriter-text p {
  margin: 0;
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.1em;
  background: linear-gradient(90deg, #10b981 0%, #10b981 10%, #3b82f6 40%, #8b5cf6 70%, #8b5cf6 100%);
  background-size: 200% 100%;
  background-position: 0% 0;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: gradient-fade-colorful 7s ease-out forwards;
}

@keyframes gradient-fade-colorful {
  0% {
    background-position: 0% 0;
  }
  100% {
    background-position: 100% 0;
  }
}

/* Fireflies */
.firefly {
  position: fixed;
  left: 50%;
  top: 50%;
  width: 0.4vw;
  height: 0.4vw;
  margin: -0.2vw 0 0 9.8vw;
  animation: ease 200s alternate infinite;
  pointer-events: none;
  z-index: 1;
  opacity: 0.6;
}

.firefly::before,
.firefly::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  transform-origin: -10vw;
}

.firefly::before {
  background: #ccaa00;
  opacity: 0.3;
  animation: drift ease alternate infinite;
}

.firefly::after {
  background: #ffeb3b;
  opacity: 0;
  box-shadow: 0 0 0vw 0vw #ffeb3b;
  animation: drift ease alternate infinite, flash ease infinite;
}

@keyframes drift {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes flash {
  0%, 30%, 100% {
    opacity: 0.2;
    box-shadow: 0 0 0vw 0vw #ccaa00;
  }
  5% {
    opacity: 1;
    box-shadow: 0 0 2vw 0.4vw #ffeb3b;
  }
}

/* Individual firefly animations */
.firefly:nth-child(1) { animation-name: move1; }
.firefly:nth-child(1)::before { animation-duration: 10s; }
.firefly:nth-child(1)::after { animation-duration: 10s, 7000ms; animation-delay: 0ms, 2000ms; }

.firefly:nth-child(2) { animation-name: move2; }
.firefly:nth-child(2)::before { animation-duration: 12s; }
.firefly:nth-child(2)::after { animation-duration: 12s, 8000ms; animation-delay: 0ms, 3000ms; }

.firefly:nth-child(3) { animation-name: move3; }
.firefly:nth-child(3)::before { animation-duration: 9s; }
.firefly:nth-child(3)::after { animation-duration: 9s, 6500ms; animation-delay: 0ms, 1500ms; }

.firefly:nth-child(4) { animation-name: move4; }
.firefly:nth-child(4)::before { animation-duration: 11s; }
.firefly:nth-child(4)::after { animation-duration: 11s, 9000ms; animation-delay: 0ms, 4000ms; }

.firefly:nth-child(5) { animation-name: move5; }
.firefly:nth-child(5)::before { animation-duration: 13s; }
.firefly:nth-child(5)::after { animation-duration: 13s, 7500ms; animation-delay: 0ms, 2500ms; }

.firefly:nth-child(6) { animation-name: move6; }
.firefly:nth-child(6)::before { animation-duration: 10s; }
.firefly:nth-child(6)::after { animation-duration: 10s, 8500ms; animation-delay: 0ms, 3500ms; }

.firefly:nth-child(7) { animation-name: move7; }
.firefly:nth-child(7)::before { animation-duration: 14s; }
.firefly:nth-child(7)::after { animation-duration: 14s, 6000ms; animation-delay: 0ms, 1000ms; }

.firefly:nth-child(8) { animation-name: move8; }
.firefly:nth-child(8)::before { animation-duration: 11s; }
.firefly:nth-child(8)::after { animation-duration: 11s, 9500ms; animation-delay: 0ms, 4500ms; }

@keyframes move1 {
  0% { transform: translateX(-20vw) translateY(-15vh) scale(0.5); }
  25% { transform: translateX(10vw) translateY(20vh) scale(0.7); }
  50% { transform: translateX(-15vw) translateY(-10vh) scale(0.9); }
  75% { transform: translateX(25vw) translateY(15vh) scale(0.6); }
  100% { transform: translateX(-20vw) translateY(-15vh) scale(0.5); }
}

@keyframes move2 {
  0% { transform: translateX(30vw) translateY(10vh) scale(0.6); }
  25% { transform: translateX(-10vw) translateY(-20vh) scale(0.8); }
  50% { transform: translateX(20vw) translateY(15vh) scale(0.5); }
  75% { transform: translateX(-25vw) translateY(-5vh) scale(0.7); }
  100% { transform: translateX(30vw) translateY(10vh) scale(0.6); }
}

@keyframes move3 {
  0% { transform: translateX(-30vw) translateY(20vh) scale(0.7); }
  25% { transform: translateX(15vw) translateY(-15vh) scale(0.9); }
  50% { transform: translateX(-20vw) translateY(10vh) scale(0.6); }
  75% { transform: translateX(10vw) translateY(-20vh) scale(0.8); }
  100% { transform: translateX(-30vw) translateY(20vh) scale(0.7); }
}

@keyframes move4 {
  0% { transform: translateX(25vw) translateY(-20vh) scale(0.8); }
  25% { transform: translateX(-15vw) translateY(15vh) scale(0.6); }
  50% { transform: translateX(30vw) translateY(-10vh) scale(0.9); }
  75% { transform: translateX(-20vw) translateY(20vh) scale(0.7); }
  100% { transform: translateX(25vw) translateY(-20vh) scale(0.8); }
}

@keyframes move5 {
  0% { transform: translateX(-25vw) translateY(-10vh) scale(0.9); }
  25% { transform: translateX(20vw) translateY(25vh) scale(0.5); }
  50% { transform: translateX(-30vw) translateY(-15vh) scale(0.7); }
  75% { transform: translateX(15vw) translateY(10vh) scale(0.8); }
  100% { transform: translateX(-25vw) translateY(-10vh) scale(0.9); }
}

@keyframes move6 {
  0% { transform: translateX(15vw) translateY(15vh) scale(0.6); }
  25% { transform: translateX(-20vw) translateY(-25vh) scale(0.8); }
  50% { transform: translateX(25vw) translateY(20vh) scale(0.7); }
  75% { transform: translateX(-10vw) translateY(-15vh) scale(0.9); }
  100% { transform: translateX(15vw) translateY(15vh) scale(0.6); }
}

@keyframes move7 {
  0% { transform: translateX(-15vw) translateY(25vh) scale(0.7); }
  25% { transform: translateX(30vw) translateY(-10vh) scale(0.5); }
  50% { transform: translateX(-25vw) translateY(15vh) scale(0.8); }
  75% { transform: translateX(20vw) translateY(-20vh) scale(0.6); }
  100% { transform: translateX(-15vw) translateY(25vh) scale(0.7); }
}

@keyframes move8 {
  0% { transform: translateX(20vw) translateY(-15vh) scale(0.8); }
  25% { transform: translateX(-25vw) translateY(20vh) scale(0.6); }
  50% { transform: translateX(15vw) translateY(-25vh) scale(0.9); }
  75% { transform: translateX(-30vw) translateY(10vh) scale(0.7); }
  100% { transform: translateX(20vw) translateY(-15vh) scale(0.8); }
}

@media (max-width: 1200px) {
  p {
    font-size: 1.2em;
  }

  .typewriter-text {
    font-size: 1.1em;
    min-height: 350px;
  }

  .title-line-2 {
    font-size: 3em;
  }

  .hero-image {
    max-width: 400px;
  }
}

@media (max-width: 800px) {
  .home-container {
    flex-direction: column;
    padding: 1.5rem 1rem;
    margin: 1rem;
  }

  .home-copy {
    flex: 0;
    padding-bottom: 1em;
    text-align: center;
    padding: 0;
    order: 1;
  }

  .about-content {
    max-width: 600px;
    margin: 0 auto;
  }

  .typewriter-text {
    font-size: 1.1em;
    min-height: 300px;
    text-align: left;
  }

  .title-line-1 {
    font-size: 1.2em;
  }

  .title-line-2 {
    font-size: 2.2em;
  }

  .hero-image-container {
    margin: 1em 0;
    order: 2;
  }

  .hero-image {
    max-width: 100%;
    margin-bottom: 0;
  }

  .newsletter-callout {
    margin-top: 1em;
    order: 3;
  }
}
</style>

<script src="https://f.convertkit.com/ckjs/ck.5.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.querySelector('.newsletter-form-inline') as HTMLFormElement;
  const modal = document.getElementById('success-modal');
  const closeButton = document.getElementById('close-modal');
  const okButton = document.getElementById('modal-ok');

  if (!form || !modal) return;

  // Function to show our success modal
  function showSuccessModal() {
    modal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
    form.reset();
  }

  // Intercept form submission and handle manually
  form.addEventListener('submit', function(e) {
    e.preventDefault(); // Prevent normal form submission
    
    const email = (form.querySelector('input[name="email_address"]') as HTMLInputElement)?.value;
    if (!email) return;
    
    const submitButton = form.querySelector('[data-element="submit"]');
    const spinner = submitButton.querySelector('.formkit-spinner');
    const buttonText = submitButton.querySelector('span');
    
    // Show loading state
    if (spinner) (spinner as HTMLElement).style.display = 'block';
    if (buttonText) buttonText.style.opacity = '0';
    (submitButton as HTMLButtonElement).disabled = true;
    
    // Create form data
    const formData = new FormData();
    formData.append('email_address', email);
    
    // Submit to ConvertKit
    fetch('https://app.kit.com/forms/7612128/subscriptions', {
      method: 'POST',
      body: formData,
      mode: 'no-cors' // This allows the request but we can't read the response
    })
    .then(() => {
      // Since we can't read the response with no-cors, we assume success after a delay
      setTimeout(() => {
        showSuccessModal();
      }, 1500);
    })
    .catch((error) => {
      console.error('Error:', error);
      // Still show success modal since we can't really detect errors with no-cors
      setTimeout(() => {
        showSuccessModal();
      }, 1500);
    })
    .finally(() => {
      // Reset button state
      if (spinner) (spinner as HTMLElement).style.display = 'none';
      if (buttonText) buttonText.style.opacity = '1';
      (submitButton as HTMLButtonElement).disabled = false;
    });
  });

  // Close modal handlers
  function closeModal() {
    if (modal) {
      modal.style.display = 'none';
      document.body.style.overflow = 'auto';
    }
  }

  if (closeButton) {
    closeButton.addEventListener('click', closeModal);
  }

  if (okButton) {
    okButton.addEventListener('click', closeModal);
  }

  // Close modal when clicking overlay
  modal.addEventListener('click', function(e) {
    if (e.target === modal) {
      closeModal();
    }
  });

  // Close modal with Escape key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && modal && modal.style.display === 'flex') {
      closeModal();
    }
  });
});

// ‚ú® EASTER EGGS ‚ú®
document.addEventListener('DOMContentLoaded', function() {
  // Konami Code Easter Egg: ‚Üë ‚Üë ‚Üì ‚Üì ‚Üê ‚Üí ‚Üê ‚Üí B A
  const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
  let konamiIndex = 0;

  document.addEventListener('keydown', function(e) {
    if (e.key.toLowerCase() === konamiCode[konamiIndex].toLowerCase()) {
      konamiIndex++;
      if (konamiIndex === konamiCode.length) {
        activateMagicMode();
        konamiIndex = 0;
      }
    } else {
      konamiIndex = 0;
    }
  });

  function activateMagicMode() {
    // Create magical confetti explosion
    const colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c', '#4facfe'];
    for (let i = 0; i < 100; i++) {
      createConfetti(colors[Math.floor(Math.random() * colors.length)]);
    }

    // Add secret message
    const message = document.createElement('div');
    message.textContent = 'üéâ You found the secret! Welcome to the magical realm! üéâ';
    message.style.cssText = `
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 2em 3em;
      border-radius: 20px;
      font-size: 1.5em;
      font-weight: bold;
      z-index: 10000;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      animation: magicAppear 0.5s ease;
      text-align: center;
    `;
    document.body.appendChild(message);

    setTimeout(() => {
      message.style.animation = 'magicDisappear 0.5s ease forwards';
      setTimeout(() => message.remove(), 500);
    }, 3000);
  }

  function createConfetti(color) {
    const confetti = document.createElement('div');
    confetti.style.cssText = `
      position: fixed;
      width: 10px;
      height: 10px;
      background: ${color};
      left: ${Math.random() * 100}%;
      top: ${Math.random() * 100}%;
      opacity: 1;
      pointer-events: none;
      z-index: 9999;
      border-radius: 50%;
      animation: confettiFall ${2 + Math.random() * 3}s ease-out forwards;
    `;
    document.body.appendChild(confetti);
    setTimeout(() => confetti.remove(), 5000);
  }

  // Triple-click the main heading for surprise
  const mainHeading = document.querySelector('.home-copy h1');
  let clickCount = 0;
  let clickTimer = null;

  if (mainHeading) {
    mainHeading.addEventListener('click', function() {
      clickCount++;

      if (clickTimer) clearTimeout(clickTimer);

      if (clickCount === 3) {
        // Change text temporarily
        const originalText = mainHeading.textContent;
        mainHeading.textContent = '‚ú® Magic Makers ‚ú®';
        mainHeading.style.transform = 'scale(1.2) rotate(5deg)';

        setTimeout(() => {
          mainHeading.textContent = originalText;
          mainHeading.style.transform = '';
        }, 2000);

        clickCount = 0;
      } else {
        clickTimer = setTimeout(() => {
          clickCount = 0;
        }, 500);
      }
    });
  }

  // Secret sparkle trail on mouse move (activate by clicking the floating sparkle)
  let sparkleTrailActive = false;
  const homeContainer = document.querySelector('.home-container');

  if (homeContainer) {
    // The sparkle emoji in the corner activates this
    homeContainer.addEventListener('click', function(e) {
      const rect = homeContainer.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      // Check if click is near the top-right corner (the floating sparkle)
      if (x > rect.width - 80 && y < 80) {
        sparkleTrailActive = !sparkleTrailActive;

        const notification = document.createElement('div');
        notification.textContent = sparkleTrailActive ? '‚ú® Sparkle trail activated!' : '‚ú® Sparkle trail deactivated!';
        notification.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          background: rgba(124, 58, 237, 0.95);
          color: white;
          padding: 1em 2em;
          border-radius: 12px;
          font-weight: 600;
          z-index: 10000;
          animation: slideInRight 0.3s ease;
        `;
        document.body.appendChild(notification);
        setTimeout(() => notification.remove(), 2000);
      }
    });
  }

  document.addEventListener('mousemove', function(e) {
    if (sparkleTrailActive && Math.random() > 0.9) {
      const sparkle = document.createElement('div');
      sparkle.textContent = '‚ú®';
      sparkle.style.cssText = `
        position: fixed;
        left: ${e.clientX}px;
        top: ${e.clientY}px;
        pointer-events: none;
        z-index: 9999;
        animation: sparkleDisappear 1s ease forwards;
        font-size: ${10 + Math.random() * 20}px;
      `;
      document.body.appendChild(sparkle);
      setTimeout(() => sparkle.remove(), 1000);
    }
  });
});

// Add animations for easter eggs
const style = document.createElement('style');
style.textContent = `
  @keyframes magicAppear {
    from {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.5) rotate(-10deg);
    }
    to {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1) rotate(0deg);
    }
  }

  @keyframes magicDisappear {
    to {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.5) rotate(10deg);
    }
  }

  @keyframes confettiFall {
    to {
      transform: translateY(100vh) rotate(360deg);
      opacity: 0;
    }
  }

  @keyframes sparkleDisappear {
    0% {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
    100% {
      opacity: 0;
      transform: scale(0) translateY(-20px);
    }
  }

  @keyframes slideInRight {
    from {
      transform: translateX(400px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
`;
document.head.appendChild(style);

// Parallax scroll effects
let ticking = false;

function updateParallax() {
  const scrolled = window.pageYOffset;
  const parallaxElements = document.querySelectorAll('.home-container, .hero-image, .youtube-section');

  parallaxElements.forEach((element, index) => {
    const speed = 0.5 + (index * 0.1);
    const yPos = -(scrolled * speed);
    if (element.classList.contains('hero-image')) {
      element.style.transform = `translateY(${yPos * 0.1}px)`;
    }
  });

  ticking = false;
}

function requestTick() {
  if (!ticking) {
    window.requestAnimationFrame(updateParallax);
    ticking = true;
  }
}

window.addEventListener('scroll', requestTick, { passive: true });

// Scroll reveal animations with typewriter effects
const observerOptions = {
  threshold: 0.15,
  rootMargin: '0px 0px -100px 0px'
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.style.opacity = '1';
      entry.target.style.transform = 'translateY(0)';

      // Add typing animation to section titles
      const sectionTitle = entry.target.querySelector('.section-title');
      if (sectionTitle && !sectionTitle.classList.contains('typed')) {
        sectionTitle.classList.add('typing');
        sectionTitle.classList.add('typed');
      }
    }
  });
}, observerOptions);

document.querySelectorAll('.youtube-section, .latest-section-wrapper').forEach(section => {
  section.style.opacity = '0';
  section.style.transform = 'translateY(50px)';
  section.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
  observer.observe(section);
});
</script>
